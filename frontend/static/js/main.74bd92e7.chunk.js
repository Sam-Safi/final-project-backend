(this["webpackJsonpfinal-project-frontend"]=this["webpackJsonpfinal-project-frontend"]||[]).push([[0],{35:function(e,t,a){e.exports=a(55)},40:function(e,t,a){},41:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(18),l=a.n(r),s=a(11),i=(a(40),a(25),a(34)),c=(a(41),a(17)),m=a(31),h=a.n(m),d=a(10),u=a(12),p=a(13),g=a(15),b=a(14),f=a(6),E=a(16),v=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(g.a)(this,Object(b.a)(t).call(this))).state={email:"",password:""},e.handleChange=e.handleChange.bind(Object(f.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(f.a)(e)),e}return Object(E.a)(t,e),Object(p.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=new Headers;a.append("Content-Type","application/x-www-form-urlencoded");var n=new URLSearchParams;n.append("email",this.state.email),n.append("password",this.state.password),fetch("/user/login",{method:"POST",headers:a,body:n,redirect:"follow",credentials:"same-origin"}).then((function(e){return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:200===+e.status&&(t.props.changeLoginStatus(!0),console.log("props",t.props),t.props.history.push("/admin"));case 1:case"end":return a.stop()}}))})).catch((function(e){return console.log("error",e)}))}},{key:"render",value:function(){return o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"auth-inner"},o.a.createElement("h3",null,"Sign In"),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Email address"),o.a.createElement("input",{type:"email",className:"form-control",placeholder:"Enter email",name:"email",value:this.state.email,onChange:this.handleChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Password"),o.a.createElement("input",{type:"password",className:"form-control",placeholder:"Enter password",name:"password",value:this.state.password,onChange:this.handleChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"custom-control custom-checkbox"},o.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),o.a.createElement("label",{className:"custom-control-label",htmlFor:"customCheck1"},"Remember me"))),o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Submit")))}}]),t}(n.Component),k=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(g.a)(this,Object(b.a)(t).call(this))).state={firstname:"",lastname:"",email:"",password:"",firstnameErrorMsg:"",lastnameErrorMsg:"",emailErrorMsg:"",passwordErrorMsg:"",formValid:!1},e.handleChange=e.handleChange.bind(Object(f.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(f.a)(e)),e}return Object(E.a)(t,e),Object(p.a)(t,[{key:"handleChange",value:function(e){var t;console.log(e.target.value),this.setState((t={},Object(d.a)(t,e.target.name,e.target.value),Object(d.a)(t,"".concat(e.target.name,"ErrorMsg"),""),t))}},{key:"checkValidation",value:function(){var e=!0;return this.state.firstname||(this.setState({firstnameErrorMsg:"Please specify First name "}),e=!1),this.state.lastname||(this.setState({lastnameErrorMsg:"Please specify Last name "}),e=!1),this.state.email||(this.setState({emailErrorMsg:"Please specify Enter email "}),e=!1),this.state.password||(this.setState({passwordErrorMsg:"Please specify Enter password "}),e=!1),e}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.checkValidation()){var a=new Headers;a.append("Content-Type","application/x-www-form-urlencoded"),a.append("Authorization","Basic U2FtOmRvZG8=");var n=new URLSearchParams;n.append("firstname",this.state.firstname),n.append("lastname",this.state.lastname),n.append("email",this.state.email),n.append("password",this.state.password),fetch("/public/newUser",{method:"POST",headers:a,body:n,redirect:"follow",credentials:"same-origin"}).then((function(e){+e.status>=200&&+e.status<300&&(t.props.history.push("/sign-in"),console.log(e.json()))})).catch((function(e){return console.log("error",e)}))}}},{key:"render",value:function(){return o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"auth-inner"},o.a.createElement("h3",null,"Sign Up"),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"First name"),o.a.createElement("input",{type:"text",className:"form-control ".concat(this.state.firstnameErrorMsg&&"is-invalid"),placeholder:"First name",name:"firstname",value:this.state.firstname,onChange:this.handleChange}),o.a.createElement("div",{className:"invalid-feedback"},this.state.firstnameErrorMsg)),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Last name"),o.a.createElement("input",{type:"text",className:"form-control ".concat(this.state.lastnameErrorMsg&&"is-invalid"),placeholder:"Last name",name:"lastname",value:this.state.lastname,onChange:this.handleChange}),o.a.createElement("div",{className:"invalid-feedback"},this.state.lastnameErrorMsg)),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Email address"),o.a.createElement("input",{type:"email",className:"form-control ".concat(this.state.emailErrorMsg&&"is-invalid"),placeholder:"Enter email",name:"email",value:this.state.email,onChange:this.handleChange}),o.a.createElement("div",{className:"invalid-feedback"},this.state.emailErrorMsg)),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Password"),o.a.createElement("input",{type:"password",className:"form-control ".concat(this.state.passwordErrorMsg&&"is-invalid"),placeholder:"Enter password",name:"password",value:this.state.password,onChange:this.handleChange}),o.a.createElement("div",{className:"invalid-feedback"},this.state.passwordErrorMsg)),o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Sign Up")))}}]),t}(n.Component),y=a(56),w=a(72),C=a(57),j=a(58),S=a(59),N=a(60),O=a(61),x=a(62),M=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).toggle=function(){a.setState({modal:!a.state.modal})},a.handleFileChange=function(e){a.setState({file:e.target.files[0]})},a.handleSubmit=function(e){e.preventDefault();var t=new FormData;t.append("file",a.state.file),t.append("title",a.state.title),t.append("author",a.state.author),t.append("description",a.state.description),t.append("image",a.state.image),fetch("/private/book/new",{method:"POST",body:t,redirect:"follow",credentials:"same-origin"}).then((function(e){201===e.status&&(console.log("new book created"),a.props.history.push("/booklist"))})).catch((function(e){return console.log(e)}))},a.state={title:"",author:"",description:"",image:""},a.handleChange=a.handleChange.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleFileChange=a.handleFileChange.bind(Object(f.a)(a)),a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return o.a.createElement("div",{className:"auth-inner"},o.a.createElement("div",null,o.a.createElement(y.a,{color:"primary",style:{marginBottom:"2rem"},onClick:this.toggle},"Add Book"),o.a.createElement(w.a,{isOpen:this.state.modal,toggle:this.toggle},o.a.createElement(C.a,{toggle:this.toggle},"Add book to your library"),o.a.createElement(j.a,null,o.a.createElement(S.a,{onSubmit:this.handleSubmit,className:"form"},o.a.createElement(N.a,null,o.a.createElement(O.a,{for:"title"},"Title:"),o.a.createElement(x.a,{color:"black",type:"text",name:"title",placeholder:"",value:this.state.title,onChange:this.handleChange}),o.a.createElement(O.a,{for:"author"},"Author:"),o.a.createElement(x.a,{type:"text",name:"author",id:"author",placeholder:"",value:this.state.author,onChange:this.handleChange}),o.a.createElement(O.a,{for:"description"},"Description:"),o.a.createElement(x.a,{type:"text",name:"description",placeholder:"",value:this.state.description,onChange:this.handleChange}),o.a.createElement(O.a,{for:"image"},"Image:"),o.a.createElement(x.a,{className:"form-input",type:"file",id:"image",name:"image",onChange:this.handleFileChange}),o.a.createElement(y.a,{color:"dark",style:{marginTop:"2rem"},block:!0},"Add Book")))))))}}]),t}(n.Component),D=a(70),T=a(71),B=a(63),L=a(64),P=a(65),F=a(66),A=a(67),U=a(68),R=a(69),G=function(e){return console.log("Book props",e),o.a.createElement(B.a,{xs:"3",sm:"3",md:"4",lg:"4",xl:"4"},o.a.createElement(L.a,null,o.a.createElement(P.a,{top:!0,width:"100%",src:"http://localhost:4000/".concat(e.book.image),alt:"Card image cap"}),o.a.createElement(F.a,null,o.a.createElement(A.a,null,"title: ",e.book.title),o.a.createElement(U.a,null,"by: ",e.book.author),o.a.createElement(R.a,null,"description: ",e.book.description),o.a.createElement(y.a,{color:"danger",onClick:function(){return e.onDelete(e.book._id)}},"Delete"),o.a.createElement(s.b,{to:"/editbook/".concat(e.book._id)},o.a.createElement(y.a,{color:"primary"},"Edit Book")))))},I=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).handleDelete=function(e){fetch("/private/book/".concat(e),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){a.setState({books:e}),console.log(e),a.fetchBookList()})).catch((function(e){return console.log("error",e)}))},a.state={books:[]},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"fetchBookList",value:function(){var e=this;fetch("/book/find",{method:"GET",redirect:"follow"}).then((function(e){return e.json()})).then((function(t){e.setState({books:t}),console.log(t)})).catch((function(e){return console.log("error",e)}))}},{key:"componentDidMount",value:function(){var e=this;fetch("/book/find",{method:"GET",redirect:"follow"}).then((function(e){return e.json()})).then((function(t){e.setState({books:t}),console.log(t)})).catch((function(e){return console.log("error",e)}))}},{key:"renderBooks",value:function(){var e=this;return this.state.books.length?this.state.books.map((function(t){return o.a.createElement(G,{key:t._id,book:t,onDelete:e.handleDelete,onClick:e.handleEdit})})):o.a.createElement("div",null,"loading ...")}},{key:"render",value:function(){return o.a.createElement(D.a,null,o.a.createElement(T.a,null,this.renderBooks()))}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(g.a)(this,Object(b.a)(t).call(this,e))).toggle=function(){a.setState({modal:!a.state.modal})},a.handleEdit=function(e){e.preventDefault(),console.log("handle edit reached");var t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded");var n=new URLSearchParams;n.append("title",a.state.title),n.append("author",a.state.author),n.append("description",a.state.description),n.append("image",a.state.image);var o={method:"PUT",headers:t,body:n,redirect:"follow",credentials:"same-origin"},r=a.props.match.params.bookid;fetch("/private/book/".concat(r),o).then((function(e){return e.json()})).then((function(e){a.setState({books:e}),console.log(e),a.props.history.push("/booklist")})).catch((function(e){return console.log("error",e)}))},a.state={title:"",author:"",description:"",image:""},a.handleChange=a.handleChange.bind(Object(f.a)(a)),a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.bookid;console.log(t),fetch("/private/book/".concat(t),{method:"GET",redirect:"follow"}).then((function(e){return console.log(e),e.json()})).then((function(t){e.setState({title:t.title,author:t.author,description:t.description,image:t.image}),console.log(t)})).catch((function(e){return console.log("error",e)}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"auth-inner"},o.a.createElement(S.a,{onSubmit:this.handleEdit,className:"form"},o.a.createElement(N.a,null,o.a.createElement(O.a,{for:"title"},"Title:"),o.a.createElement(x.a,{color:"black",type:"text",name:"title",placeholder:"",value:this.state.title,onChange:this.handleChange}),o.a.createElement(O.a,{for:"author"},"Author:"),o.a.createElement(x.a,{type:"text",name:"author",id:"author",placeholder:"",value:this.state.author,onChange:this.handleChange}),o.a.createElement(O.a,{for:"description"},"Description:"),o.a.createElement(x.a,{type:"text",name:"description",placeholder:"",value:this.state.description,onChange:this.handleChange}),o.a.createElement(O.a,{for:"image"},"Image:"),o.a.createElement(x.a,{type:"select",name:"image"}),o.a.createElement(y.a,{type:"submit",color:"dark",style:{marginTop:"2rem"},block:!0},"Edit Book"))))}}]),t}(n.Component);var V=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1];return o.a.createElement(s.a,null,o.a.createElement("div",{className:"App"},o.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top"},o.a.createElement("div",{className:"container"},o.a.createElement(s.b,{className:"navbar-brand",to:"/sign-in"},"S&S Book Store"),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02"},o.a.createElement("ul",{className:"navbar-nav ml-auto"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(s.b,{className:"nav-link",to:"/booklist"},"BookList")),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02"},o.a.createElement("ul",{className:"navbar-nav ml-auto"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(s.b,{className:"nav-link",to:"/admin"},"Admin")),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02"},o.a.createElement("ul",{className:"navbar-nav ml-auto"},o.a.createElement("li",{className:"nav-item"},o.a.createElement(s.b,{className:"nav-link",to:"/sign-in"},"Login")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(s.b,{className:"nav-link",to:"/sign-up"},"Sign up")))))))))),o.a.createElement("div",{className:"auth-wrapper"},o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:"/",component:v}),o.a.createElement(c.a,{path:"/sign-in",render:function(e){return o.a.createElement(v,Object.assign({},e,{changeLoginStatus:r}))}}),o.a.createElement(c.a,{path:"/sign-up",component:k}),a&&o.a.createElement(c.a,{path:"/admin",component:M}))),o.a.createElement(c.c,null,a&&o.a.createElement(c.a,{path:"/booklist",component:I}),o.a.createElement(c.a,{path:"/editbook/:bookid",component:H}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(s.a,null,o.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.74bd92e7.chunk.js.map